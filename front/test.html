<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,700,1,0" />
		<title>[TESTING PAGE] BluMidiVisualizer</title>
		<link href="assets/icon.png" rel="icon" type="image/png" sizes="32x32" />
		<link href="themes/default-theme.css" rel="stylesheet" type="text/css" />
		<link href="pack/colorjoe.css" rel="stylesheet" type="text/css" />
		<link href="src/style.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div id="screen-fade"></div>
		<div id="list" style="overflow-y: scroll; height: 25vh; max-height: 25vh">
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p id="after">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet fermentum ipsum. Cras rhoncus tellus quis libero lacinia sodales. Nam efficitur ligula nec nisi bibendum dignissim. Nullam a hendrerit purus. Etiam vitae maximus ex, vitae rutrum nunc. Nulla facilisis elit ut nulla pretium, et ornare risus consequat. Cras vitae diam vel nibh porttitor lobortis. Vivamus pharetra suscipit quam facilisis interdum. Suspendisse velit dui, tempus fermentum lectus quis, cursus mollis leo. Vivamus sit amet nisl aliquet, posuere nisl at, vehicula nisi. Suspendisse non nunc eget risus rhoncus dictum sit amet vitae purus. Nullam consectetur sed ex eu pellentesque. Nullam fringilla erat eu ligula facilisis, at tristique leo posuere. Vestibulum dictum vestibulum est eu tempus.</p>
		</div>
		<!-------- SCRIPTS -------->

		<!-- PACKAGES -->
		<script src="pack/colorjoe.js"></script>
		<!-- BMV SOURCE -->
		<script>
			const print = console.log

			var fade_users = 0

			function fade_in() {
			    fade_users++
			    var fade = document.getElementById('screen-fade')
			    fade.style = ""
			}

			function fade_out() {
			    fade_users--
			    if (fade_users <= 0) {
			        var fade = document.getElementById('screen-fade')
			        fade.style = "display: none;"
			    }
			}

			fade_out()

			const HIDEN_STYLE = "display: none; "

			colorjoe.registerExtra('close', (p, joe, o) => {
			    let close_button = document.createElement('button')
			    close_button.textContent = "close"
			    close_button.onclick = e => {
			    	p.parentElement.setAttribute('style', HIDEN_STYLE)
			        fade_out()
			    }
			    p.appendChild(close_button)
			    return {
			        change(col) {},
			        done(col) {}
			    };
			})

			class ColorPicker {
			    constructor(init_color) {

			        let button = document.createElement('div')
			        button.style = `background: ${init_color}`
			        button.classList.add('pickerButton')
			        let joe_elem = document.createElement('div')
			        joe_elem.style = HIDEN_STYLE
			        button.appendChild(joe_elem)

			        this.joe = colorjoe.rgb(joe_elem, init_color, ["hex", "close"])
			        joe_elem.classList.add('customColorPicker')


			        button.onclick = e => {
			            if (button !== e.target) { return }
			            let curr_style = joe_elem.getAttribute('style')
			            if (curr_style == HIDEN_STYLE) {
			                joe_elem.setAttribute('style', "")
			                fade_in()
			            } else {
			                joe_elem.setAttribute('style', HIDEN_STYLE)
			                fade_out()
			            }
			        }

			        this.button_update = () => { button.setAttribute('style', `background: ${this.value}; --scroll: ${this.scroll}`) }

			        let update_func = color => { this.value = color.hex(); this.button_update() }

			        this.joe.on("change", update_func)
			        this.joe.on("done", update_func)

			        this.button = button
			        this.value = init_color
			    }

			    on(event, func) {
			        this.joe.on(event, func)
			    }

			    parented() {
			        this.button.parentElement.onscroll = e => {
			        	this.scroll = this.button.parentElement.scrollTop
			        	this.button_update()
			        }
			    }
			}

			var pick = new ColorPicker("#024aca")

			document.getElementById('list').insertBefore(pick.button, document.getElementById('after'))
			// pick.parented()
		</script>
	</body>
</html>